version: v1.0
name: Build and deploy through docker
agent:
  machine:
    type: e1-standard-4
    os_image: ubuntu1804
  containers:
    - name: main
      image: 'aprilmintacpineda/aws-sam-cli-deploy-nodejs:0.0.2'
fail_fast:
  stop:
    when: 'true'
auto_cancel:
  queued:
    when: 'true'
blocks:
  - name: Hello World
    task:
      jobs:
        - name: Test job
          commands:
            - checkout
            - echo "Hello from my 'main' container"
            - ls -lha
      secrets:
        - name: AWS Account
    skip:
      when: branch = 'master'
